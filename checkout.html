<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MC State - إتمام الطلب</title>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <style>
        :root {
            --bg-dark: #0a0f14;
            --bg-darker: #060a0d;
            --bg-card: #12171c;
            --orange: #00d4aa;
            --orange-dark: #00b894;
            --text-white: #ffffff;
            --text-gray: #8a8f98;
            --border-color: #1e2428;
            --success: #28a745;
            --danger: #dc3545;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: 'Cairo', sans-serif;
            background: var(--bg-dark);
            color: var(--text-white);
            min-height: 100vh;
            direction: rtl;
        }

        /* Header */
        .header {
            background: rgba(6, 10, 13, 0.95);
            backdrop-filter: blur(20px);
            padding: 15px 40px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1000;
            border-bottom: 1px solid var(--border-color);
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 12px;
            text-decoration: none;
        }

        .logo img { width: 50px; height: 50px; border-radius: 50%; }
        .logo span { font-size: 24px; font-weight: 800; color: var(--orange); }

        .back-btn {
            display: flex;
            align-items: center;
            gap: 8px;
            color: var(--text-gray);
            text-decoration: none;
            font-weight: 600;
            transition: color 0.3s;
        }

        .back-btn:hover { color: var(--orange); }

        /* Hero */
        .checkout-hero {
            padding: 120px 20px 50px;
            text-align: center;
            background: linear-gradient(180deg, var(--bg-darker), var(--bg-dark));
        }

        .checkout-hero h1 {
            font-size: 36px;
            font-weight: 900;
            margin-bottom: 10px;
        }

        .checkout-hero h1 span { color: var(--orange); }
        .checkout-hero p { color: var(--text-gray); }

        /* Container */
        .checkout-container {
            max-width: 900px;
            margin: 0 auto;
            padding: 30px 20px 80px;
        }

        /* Section */
        .checkout-section {
            background: var(--bg-card);
            border-radius: 15px;
            margin-bottom: 25px;
            border: 1px solid var(--border-color);
            overflow: hidden;
        }

        .section-header {
            background: var(--bg-darker);
            padding: 18px 25px;
            font-size: 18px;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 10px;
            border-bottom: 1px solid var(--border-color);
        }

        .section-header .material-icons { color: var(--orange); }
        .section-body { padding: 25px; }

        /* Order Summary */
        .order-item {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 15px;
            background: var(--bg-darker);
            border-radius: 10px;
            margin-bottom: 12px;
        }

        .order-item:last-of-type { margin-bottom: 0; }

        .order-item-image {
            width: 60px;
            height: 60px;
            border-radius: 8px;
            object-fit: cover;
        }

        .order-item-info { flex: 1; }
        .order-item-name { font-weight: 700; margin-bottom: 4px; }
        .order-item-qty { color: var(--text-gray); font-size: 13px; }
        .order-item-price { font-weight: 700; color: var(--orange); font-size: 18px; }

        .order-totals {
            margin-top: 20px;
            padding-top: 20px;
            border-top: 1px solid var(--border-color);
        }

        .total-row {
            display: flex;
            justify-content: space-between;
            padding: 10px 0;
            font-size: 16px;
        }

        .total-row.final {
            font-size: 22px;
            font-weight: 800;
            color: var(--orange);
            padding-top: 15px;
            margin-top: 10px;
            border-top: 1px solid var(--border-color);
        }

        /* Account Selection */
        .account-select-label {
            font-weight: 700;
            font-size: 16px;
            margin-bottom: 15px;
            display: block;
            color: var(--text-white);
        }

        .account-options {
            display: flex;
            gap: 15px;
            margin-bottom: 25px;
        }

        .account-option {
            flex: 1;
            background: var(--bg-darker);
            border: 2px solid var(--border-color);
            border-radius: 12px;
            padding: 20px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
        }

        .account-option:hover {
            border-color: var(--orange);
        }

        .account-option.active {
            border-color: var(--orange);
            background: rgba(0, 212, 170, 0.1);
        }

        .account-option .bank-name {
            font-size: 20px;
            font-weight: 800;
            margin-bottom: 5px;
        }

        .account-option .holder-name {
            color: var(--text-gray);
            font-size: 14px;
        }

        .account-option.active .bank-name {
            color: var(--orange);
        }

        /* Account Info */
        .account-info {
            display: none;
            background: var(--bg-darker);
            border-radius: 12px;
            overflow: hidden;
            margin-bottom: 25px;
        }

        .account-info.active { display: block; }

        .info-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 18px 20px;
            border-bottom: 1px solid var(--border-color);
        }

        .info-row:last-child { border-bottom: none; }
        .info-row:nth-child(odd) { background: rgba(255, 255, 255, 0.02); }

        .info-label {
            color: var(--text-gray);
            font-weight: 600;
        }

        .info-value {
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 10px;
            direction: ltr;
        }

        .copy-btn {
            background: var(--orange);
            border: none;
            color: white;
            padding: 6px 14px;
            border-radius: 6px;
            font-size: 12px;
            font-weight: 700;
            cursor: pointer;
            font-family: 'Cairo', sans-serif;
            transition: background 0.3s;
        }

        .copy-btn:hover { background: var(--orange-dark); }

        /* Upload Section */
        .upload-label {
            font-weight: 700;
            margin-bottom: 12px;
            display: block;
        }

        .upload-area {
            border: 2px dashed var(--border-color);
            border-radius: 12px;
            padding: 40px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            margin-bottom: 20px;
        }

        .upload-area:hover { border-color: var(--orange); }

        .upload-area.has-file {
            border-color: var(--success);
            background: rgba(40, 167, 69, 0.1);
        }

        .upload-area .material-icons {
            font-size: 48px;
            color: var(--text-gray);
            margin-bottom: 10px;
        }

        .upload-area.has-file .material-icons { color: var(--success); }

        .upload-area p { color: var(--text-gray); }

        .upload-area .file-name {
            color: var(--success);
            font-weight: 700;
            margin-top: 10px;
            display: none;
        }

        .upload-area.has-file .file-name { display: block; }

        .upload-input { display: none; }

        /* Sender Input */
        .form-group { margin-bottom: 20px; }
        .form-group label { display: block; font-weight: 700; margin-bottom: 10px; }

        .form-control {
            width: 100%;
            padding: 15px 20px;
            background: var(--bg-darker);
            border: 2px solid var(--border-color);
            border-radius: 10px;
            color: var(--text-white);
            font-family: 'Cairo', sans-serif;
            font-size: 16px;
            transition: border-color 0.3s;
        }

        .form-control:focus {
            outline: none;
            border-color: var(--orange);
        }

        /* Submit Button */
        .submit-btn {
            width: 100%;
            padding: 18px;
            background: var(--orange);
            border: none;
            border-radius: 12px;
            color: white;
            font-family: 'Cairo', sans-serif;
            font-size: 18px;
            font-weight: 800;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            transition: all 0.3s;
        }

        .submit-btn:hover { background: var(--orange-dark); transform: translateY(-2px); }
        .submit-btn:disabled { background: var(--text-gray); cursor: not-allowed; transform: none; }

        /* Success Message */
        .success-container {
            display: none;
            text-align: center;
            padding: 60px 30px;
        }

        .success-container .material-icons {
            font-size: 80px;
            color: var(--success);
            margin-bottom: 20px;
        }

        .success-container h2 {
            font-size: 28px;
            margin-bottom: 15px;
        }

        .success-container p {
            color: var(--text-gray);
            margin-bottom: 10px;
        }

        .success-container .order-number {
            background: var(--bg-darker);
            padding: 15px 30px;
            border-radius: 10px;
            display: inline-block;
            margin: 20px 0;
            font-size: 20px;
            font-weight: 800;
            color: var(--orange);
        }

        .success-container .btn {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 14px 30px;
            background: var(--orange);
            border: none;
            border-radius: 10px;
            color: white;
            font-family: 'Cairo', sans-serif;
            font-size: 16px;
            font-weight: 700;
            text-decoration: none;
            transition: all 0.3s;
            margin-top: 15px;
        }

        .success-container .btn:hover { background: var(--orange-dark); }

        /* Empty Cart */
        .empty-cart {
            text-align: center;
            padding: 60px 20px;
        }

        .empty-cart .material-icons {
            font-size: 80px;
            color: var(--text-gray);
            opacity: 0.5;
            margin-bottom: 20px;
        }

        .empty-cart h2 { margin-bottom: 15px; }
        .empty-cart p { color: var(--text-gray); margin-bottom: 25px; }

        .empty-cart .btn {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 14px 30px;
            background: var(--orange);
            border: none;
            border-radius: 10px;
            color: white;
            font-family: 'Cairo', sans-serif;
            font-size: 16px;
            font-weight: 700;
            text-decoration: none;
        }

        /* Toast */
        .toast {
            position: fixed;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%) translateY(100px);
            background: var(--bg-card);
            color: white;
            padding: 15px 30px;
            border-radius: 10px;
            border-right: 4px solid var(--success);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.4);
            z-index: 5000;
            opacity: 0;
            transition: all 0.4s;
        }

        .toast.show {
            transform: translateX(-50%) translateY(0);
            opacity: 1;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .header { padding: 15px 20px; }
            .checkout-hero h1 { font-size: 28px; }
            .account-options { flex-direction: column; }
            .info-row { flex-direction: column; gap: 10px; text-align: center; }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <a href="./store.html" class="logo">
            <img src="./logo.webp" alt="MC State" onerror="this.src='https://via.placeholder.com/50/00d4aa/fff?text=MC'">
            <span>MC State</span>
        </a>
        <a href="./store.html" class="back-btn">
            <span class="material-icons">arrow_forward</span>
            العودة للمتجر
        </a>
    </header>

    <!-- Hero -->
    <section class="checkout-hero">
        <h1>إتمام <span>الطلب</span></h1>
        <p>أكمل طلبك عبر الديسكورد</p>
    </section>

    <!-- Checkout Container -->
    <div class="checkout-container" id="checkoutMain">
        <!-- Order Summary -->
        <div class="checkout-section">
            <div class="section-header">
                <span class="material-icons">shopping_cart</span>
                ملخص الطلب
            </div>
            <div class="section-body">
                <div id="orderItems"></div>
                <div class="order-totals">
                    <div class="total-row">
                        <span>المجموع الفرعي:</span>
                        <span id="subtotal">$0.00</span>
                    </div>
                    <div class="total-row final">
                        <span>المجموع الكلي:</span>
                        <span id="total">$0.00</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Discord Payment Instructions -->
        <div class="checkout-section">
            <div class="section-header">
                <span class="material-icons">payment</span>
                طريقة الدفع
            </div>
            <div class="section-body" style="text-align: center; padding: 40px 30px;">
                <div style="width: 90px; height: 90px; background: linear-gradient(135deg, #5865F2, #4752C4); border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 25px; font-size: 40px;">
                    <span class="material-icons" style="font-size: 40px; color: #fff;">headset_mic</span>
                </div>
                <h2 style="color: #fff; font-size: 1.6rem; margin-bottom: 12px;">ادخل الديسكورد وافتح تكت</h2>
                <p style="color: #8a8f98; font-size: 1.05rem; line-height: 1.8; margin-bottom: 30px; max-width: 450px; margin-left: auto; margin-right: auto;">
                    افتح تكت في سيرفر <strong style="color: #5865F2;">MC STATE</strong> على الديسكورد، اذكر المنتج اللي تبيه، ادفع وستلم منتجك مباشرة!
                </p>

                <div style="background: rgba(88, 101, 242, 0.1); border: 1px solid rgba(88, 101, 242, 0.3); border-radius: 12px; padding: 20px; margin-bottom: 25px; text-align: right;">
                    <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 15px;">
                        <span style="background: #5865F2; color: #fff; width: 28px; height: 28px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: 900; font-size: 14px; flex-shrink: 0;">1</span>
                        <span style="color: #ccc;">ادخل سيرفر <strong style="color: #5865F2;">MC STATE</strong> على الديسكورد</span>
                    </div>
                    <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 15px;">
                        <span style="background: #5865F2; color: #fff; width: 28px; height: 28px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: 900; font-size: 14px; flex-shrink: 0;">2</span>
                        <span style="color: #ccc;">افتح <strong style="color: #fff;">تكت</strong> في قسم الدعم</span>
                    </div>
                    <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 15px;">
                        <span style="background: #5865F2; color: #fff; width: 28px; height: 28px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: 900; font-size: 14px; flex-shrink: 0;">3</span>
                        <span style="color: #ccc;">اذكر المنتج اللي تبيه وأكمل <strong style="color: #fff;">الدفع</strong></span>
                    </div>
                    <div style="display: flex; align-items: center; gap: 10px;">
                        <span style="background: #00d4aa; color: #000; width: 28px; height: 28px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: 900; font-size: 14px; flex-shrink: 0;">✓</span>
                        <span style="color: #ccc;"><strong style="color: #00d4aa;">ستلم منتجك</strong> مباشرة بعد التأكيد!</span>
                    </div>
                </div>

                <a href="https://discord.gg/cdgc25MqxG" target="_blank" style="display: inline-flex; align-items: center; gap: 10px; background: #5865F2; color: #fff; padding: 16px 40px; border-radius: 12px; font-weight: 700; font-size: 1.1rem; text-decoration: none; transition: all 0.3s; border: none; cursor: pointer;">
                    <span class="material-icons">open_in_new</span>
                    ادخل الديسكورد وافتح تكت
                </a>
                <p style="color: #555; font-size: 0.8rem; margin-top: 15px;">discord.gg/cdgc25MqxG</p>
            </div>
        </div>
    </div>

    <!-- Empty Cart Message -->
    <div class="checkout-container" id="emptyCartContainer" style="display: none;">
        <div class="checkout-section">
            <div class="section-body">
                <div class="empty-cart">
                    <span class="material-icons">shopping_cart</span>
                    <h2>السلة فارغة!</h2>
                    <p>لم تقم بإضافة أي منتجات للسلة بعد</p>
                    <a href="./store.html" class="btn">
                        <span class="material-icons">store</span>
                        تصفح المتجر
                    </a>
                </div>
            </div>
        </div>
    </div>

    <!-- Toast -->
    <div class="toast" id="toast"></div>

    <script>
        let cart = JSON.parse(localStorage.getItem('mcstate_cart')) || [];

        function init() {
            if (cart.length === 0) {
                document.getElementById('checkoutMain').style.display = 'none';
                document.getElementById('emptyCartContainer').style.display = 'block';
                return;
            }
            renderOrderItems();
        }

        function renderOrderItems() {
            const container = document.getElementById('orderItems');
            container.innerHTML = cart.map(item => `
                <div class="order-item">
                    <img src="${item.image}" class="order-item-image" onerror="this.src='https://via.placeholder.com/60/12171c/00d4aa?text=MC'">
                    <div class="order-item-info">
                        <div class="order-item-name">${item.name}</div>
                        <div class="order-item-qty">الكمية: ${item.qty}</div>
                    </div>
                    <div class="order-item-price">$${(item.price * item.qty).toFixed(2)}</div>
                </div>
            `).join('');

            const total = cart.reduce((sum, item) => sum + (item.price * item.qty), 0);
            document.getElementById('subtotal').textContent = '$' + total.toFixed(2);
            document.getElementById('total').textContent = '$' + total.toFixed(2);
        }

        function showToast(msg) {
            const toast = document.getElementById('toast');
            toast.textContent = msg;
            toast.classList.add('show');
            setTimeout(() => toast.classList.remove('show'), 3000);
        }

        init();
    </script>
</body>
</html>
